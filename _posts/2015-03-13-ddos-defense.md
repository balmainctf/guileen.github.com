---
title: DDoS 防御笔记
layout: post
published: true
categories: 
tags: 
---

DDoS 意为分布式拒绝服务攻击

## DDoS 分类：

* IP欺骗攻击 利用RST位欺骗服务器大量合法用户连接错误，用户将会掉线。
* ICMP-Flood 
* SYN-Flood
* UDP-Flood  网络带宽耗尽攻击。
* HTTP-Flood 又名 CC 攻击

## 应对DDoS的方案

DDoS 的防御有几个层面

### DNS攻击
攻击你的DNS服务器，导致拒绝服务。选择专业的DNS服务。

DNS层也可以选择自架DNS，主要是用于第一时间进行攻击检测，将检测到的攻击解析至一个黑洞地址，也可以解析至BAT的地址。

服务分级。将信任的，重要的客户解析至单独设立的服务区。

对于客户IP的日志分析，确定哪些是老用户。

### 传输层

#### 流量攻击

网络架构层面

流量攻击是最常用的手法，也是最难防御的手法。而流量攻击通常可以达到10G的流量，这是普通网站所无法负担的。解决方案有2：一是买带宽，买机器，这就是拼钱，也是拼运维。二是将自己的网站置于强大的保护盾之后。

怎么理解这个保护盾？普通网站没有财力购买如此大的网络流量，并且这些资源在大多数的时候都是无用的，只有在攻击发生时，起到冗余带宽的作用。现在有专业的公司开始从事这种业务，他们拥有大量的带宽和入侵检测技术，将你的真实IP置于这个保护盾之后，让这个保护盾分担掉大部分的攻击，你的网站的带宽压力就降低了。

国内云盾，国外CloudFlare

#### SYN-Flood

运维层面

SYN-cookie 技术。在SYN握手时不立即分配资源。

地址状态监控技术。

### 系统层

运维层面

SSH, Fail2Ban, Firewall, SYN-Flood 策略

### 软件架构

CC 攻击。拒绝http-proxy的访问。

### 协议层

软件架构层面

对于合法数据的甄别。
安全性，数据校验，非法数据记录丢弃。

### 逻辑层

软件架构层面

静态化，高性能

### 数据层

软件及运维架构层面

高性能

### 测试工具

架设一个目标服务器，自己尝试攻击自己，或者让黑客攻击自己。
